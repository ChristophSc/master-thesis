\textbf{4. Sampling of an Uncertain Negative Triple}\\
%
All calculated scores for negative triples from the generator are handed to the Uncertainty Sampling component to calculate the uncertainty of the model and sample a triple where the model is uncertain how to classify it.
As shown in \Autoref{fig:uncertainty_sampling_component}, the Uncertainty Sampling component is divided into three sub-components which are responsible for one step each.
It contains the \textbf{Classifier}, \textbf{Uncertainty Scorer} and \textbf{Sampler} component.
\input{content/chapters/03_approach/uncertainty_sampling_component}
\clearpage

\textbf{Classifier} \\
% DESCRIPTION
The Classifier's task is to classify the negative triples by assigning each negative triple a probability of being a positive triple.
It receives the negative triple scores $s_i \in \mathbb{R}$ from the generator as input and returns a probability for each negative triple $(h',r,t') \in Neg$ to be positive  ($\mathbb{P}(y = 1| f_G(h',r,t'))$) (\Autoref{eqn:positive_probability}) as output. 
Therefore, $score_{min}$ and $score_{max}$ are used to calculate probabilities.

\input{content/chapters/03_approach/sections/table_probabilities}
For our example, in \Autoref{tab:positive_probabilities} generator scores for all negative triples $l_i' = (h, r, t_i)$ are listed which are the input of the Classifier.
For these triples and their generator score probabilities are derived for being a positive triple.
Therefore, negative triple $l_5' = (h,r,t_5)$ has the lowest probability of 10.93\% to be a positive one and $l_3' = (h,r,t_3)$ has the highest probability of 64.57\% to be a positive one.

\textbf{Uncertainty Scorer} \\
% DESCRIPTION
The task of the Uncertainty Scorer is to assign uncertainty values for all negative triples.
As input, it receives the probabilities from the Classifier of each triple to be a positive one.
As output, it returns uncertainty scores for all negative triples, where an uncertainty score of zero indicates low and an uncertainty score of one high uncertainty.
As mentioned in \Autoref{sec:calculation_of_uncertainty_scores}, there are several uncertainty measures at our disposal:
entropy, least confidence, the margin of confidence, and the ratio of confidence.
One of these uncertainty measures is chosen according to the configuration file and for each triple, the modelÂ´s uncertainty is measured.
The closer a probability of a negative triple to being a positive one is to 0.5, the higher the uncertainty score. 
Uncertainty scores $u(l)$ for a triple $l = (h,r,t)$ are calculated with \Autoref{eqn:uncertainty_function}.
\clearpage

% EXAMPLE
\input{content/chapters/03_approach/sections/table_uncertainty_scores}
For our example, this means that the Uncertainty Scorer calculates the uncertainties listed in \Autoref{tab:uncertainty_scores} for the different uncertainty measures.
As can be seen from the example, $l_4' = (h, r, t_4)$ has a probability of 42.03\% which is closest to 50\% among all triples.
For a better comparison of the different uncertainty measures, the uncertainty scores for all uncertainty measures are listed in the table.
As you can see, although the uncertainty scores are different, $l_4$ receives the highest value for all four uncertainty measures.
These uncertainty values are now passed to the Sampler component.

\textbf{Sampler} \\
% DESCRIPTION
The actual sampling of a negative triple takes place with this component.
It receives uncertainty scores for all negative triples from the Uncertainty Scorer as input and returns one negative triple as output.
As mentioned in \Autoref{sec:calculation_of_uncertainty_scores} we have two methods at our disposal how to sample an uncertain triple.
Either \usmax which always samples a triple with maximum uncertainty score or \ussoftmax which samples according to a softmax probability distribution based on uncertainty scores.
One triple is sampled according to the configured sampling method and returned to the discriminator where the next step of the adversarial training process takes place.

In our example, if the \usmax sampling method is configured a triple with a maximum uncertainty score will be selected.
As can be seen in \Autoref{tab:uncertainty_measure_example_max}, only the triple $l_4 = (h,r,t_4)$ achieves a maximum uncertainty score $u_4$ for all uncertainty measures.
Since no other triple achieves this maximum uncertainty score, it will be sampled.
Otherwise, if there were multiple triples with this uncertainty score in the negative triple set $Neg$, they would get the same probability of being sampled.
\clearpage
\input{content/chapters/03_approach/sections/table_uncertainty_measure_example_max}

% EXAMPLE - SOFTMAX
In contrast, if it is sampled according to the \ussoftmax method, the sampling probabilities have to be calculated first with the softmax function based on uncertainty scores.
With \Autoref{eq:ussoftmax}, we obtain the sampling probability listed in \Autoref{tab:uncertainty_measure_example_softmax} for the different uncertainty measures.
For all different measures, $t_4$ is the most probable one to be sampled, but the uncertainty sampling measures differ in their probability to sample $t_4$.
E.g. while based on confidence ratio, $t_4$ is sampled with a probability of 26.36\% it is only sampled with a probability of 23.63\% for entropy uncertainty measures.
The more negative triples exist, the more these sampling probabilities differ.
\clearpage
\input{content/chapters/03_approach/sections/table_uncertainty_measure_example_softmax}